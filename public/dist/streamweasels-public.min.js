function streamWeaselsKick(e){this._opts=e,this.uuid=e.uuid,this.channels=e.channels,this.channelsLength=e.channelsLength,this.limit=e.limit,this.layout=e.layout,this.embed=e.embed,this.embedTitle=e.embedTitle,this.embedTitlePosition=e.embedTitlePosition,this.embedMuted=e.embedMuted,this.showOffline=e.showOffline,this.showOfflineText=e.showOfflineText,this.showOfflineImage=e.showOfflineImage,this.autoplay=e.autoplay,this.autoplaySelect=e.autoplaySelect,this.featured=e.featured,this.offlineImage=e.offlineImage,this.logoImage=e.logoImage,this.profileImage=e.profileImage,this.tileLayout=e.tileLayout,this.tileSorting=e.tileSorting,this.tileLive=e.tileLive,this.logoBgColour=e.logoBgColour,this.logoBorderColour=e.logoBorderColour,this.maxWidth=e.maxWidth,this.tileBgColour=e.tileBgColour,this.tileTitleColour=e.tileTitleColour,this.tileSubtitleColour=e.tileSubtitleColour,this.tileRoundedCorners=e.tileRoundedCorners,this.hoverColour=e.hoverColour,this.wrapper=document.querySelector(".cp-streamweasels-kick--"+this.uuid),this.target=this.wrapper.querySelector(".cp-streamweasels-kick__streams"),this.loading=this.wrapper.querySelector(".cp-streamweasels-kick__loader"),this.player=this.wrapper.querySelector(".cp-streamweasels-kick__player"),"vods"==this.layout?this._getVods():this._getStreams(this.channels)}streamWeaselsKick.prototype=Object.create(null,{constructor:{value:streamWeaselsKick},_getStreams:{value:function(e){var i=0,t=e.split(","),r=[];this.wrapper.dataset.channelCount=this.channelsLength;for(var s=0;s<t.length;s++)!function(s){var a=t[s];r[s]=new XMLHttpRequest,r[s].open("GET","https://kick.com/api/v1/channels/"+a),console.log("https://kick.com/api/v1/channels/"+a),r[s].onreadystatechange=function(){var e,t;4===r[s].readyState&&(200===(e=r[s].status)?(t=JSON.parse(r[s].responseText),console.log(t),t&&i<this.limit&&(this._appendStream(t),i++)):(this.wrapper.dataset.channelCount--,console.log("error finding data: "+a+": "+e)))}.bind(this),r[s].send()}.bind(this)(s)}},_getVods:{value:function(){var p=0,m=[],u=Math.floor(1e3+9e3*Math.random());m[u]=new XMLHttpRequest,m[u].open("GET","https://kick.com/api/v2/channels/"+this.wrapper.dataset.vodsChannel+"/clips?cursor=0&sort=date&time="+this.wrapper.dataset.clipPeriod),m[u].onreadystatechange=function(){if(4===m[u].readyState){var e=JSON.parse(m[u].responseText),t=e.clips;if(t.length){this.wrapper.dataset.channelCount=t.length;for(var s=0;s<t.length;s++){p++;var a=e.clips[s];if(p>this.limit){console.log("No more vods - limit of "+this.limit+" reached."),this._clickHandler();break}a.language;var i=a.title,r=a.channel.slug,l=this._daysAgo(a.created_at),o=a.channel.profile_picture||"",n=a.thumbnail_url||"",c=a.view_count,d=a.id,h=a.duration,o=`
                                ${this.profileImage?"":`<img class="cp-stream__logo" src="${o}" style="${this.logoBorderColour&&"border-color:"+this.logoBorderColour};${this.logoBgColour&&"background-color:"+this.logoBgColour}">`}
                                <div class="cp-stream__info-wrapper">
                                    <span class="cp-stream__title" style="${this.tileTitleColour&&"color:"+this.tileTitleColour}">${r}</span>
                                    <span class="cp-stream__meta" style="${this.tileSubtitleColour&&"color:"+this.tileSubtitleColour}><strong class="cp-stream__meta--game">${i}</strong></span>
                                </div>
                                `,i=`
                                <div class="cp-stream cp-stream--vod" data-user="${r}" style="${this.hoverColour&&"background-color:"+this.hoverColour}">
                                    <a class="cp-stream__inner" href="${"https://kick.com/"+r+"?clip="+d}" target="_blank" title="${i}" data-channel-name="${r}" data-viewers="${c}" data-date="${a.created_at}" data-type="clips" data-id="${d}">
                                        <div class="cp-stream__image">
                                            <img loading="lazy" src="${n}">
                                            <div class="cp-stream__overlay"></div>
                                            <div class="cp-stream__status cp-stream__status-viewers"><span>${c} views</span></div>
                                            <div class="cp-stream__status cp-stream__status-duration"><span>0:${h}</span></div>
                                            <div class="cp-stream__status cp-stream__status-date"><span>${l}</span></div>
                                        </div>
                                        <div class="cp-stream__info">
                                        ${o}
                                    </div>
                                    </a>
                                </div>
                                `,r=(this.target.insertAdjacentHTML("beforeend",i),this.wrapper.dataset.online++,parseInt(this.wrapper.dataset.online));this.wrapper.dataset.channelCount!=r&&r!=this.limit||this._postAppend()}}else this.wrapper.classList.add("cp-streamweasels--no-vods"),(this.showOfflineText||this.showOfflineImage)&&this._offlineMessage()}}.bind(this),m[u].send(),this.loading&&this.loading.remove()}},_appendStream:{value:function(e){var t,s,a,i,r,l,o,n,c=e,c=(e.livestream?(t="online",s=c.livestream.thumbnail.url||"",d=c.user.profile_pic||"",a=c.livestream.session_title,i=c.slug,h=c.slug,r="en",l="video",o=c.livestream.viewers,this.wrapper.dataset.online++,n="live"==this.tileLive?'<div class="cp-stream__status cp-stream__status-live"><span>LIVE</span></div>':"viewer"==this.tileLive?`<div class="cp-stream__status cp-stream__status-viewers"><span>${this._roundViewers(o)} <span>viewers</span></span></div>`:"online"==this.tileLive?`<div class="cp-stream__status cp-stream__status-online"><span class="cp-stream__online-dot"></span><span>${this._roundViewers(o)}</span></div>`:"none"==this.tileLive?'<div class="cp-stream__status cp-stream__status-none"></div>':`<div class="cp-stream__status cp-stream__status-viewers"><span>${this._roundViewers(o)} <span>viewers</span></span></div>`):(t="offline",s=this.offlineImage||c.banner_image?.url||streamWeaselsKickVars.kickOffline,d=this.logoImage||c.user.profile_pic||streamWeaselsKickVars.kickIcon,a="Offline",i=c.slug,h=c.slug,r="en",l="video",o="0",n="",this.wrapper.dataset.offline++),`
            ${this.profileImage?"":`<img class="cp-stream__logo" src="${d}" style="${this.logoBorderColour&&"border-color:"+this.logoBorderColour};${this.logoBgColour&&"background-color:"+this.logoBgColour}">`}
            <div class="cp-stream__info-wrapper">
                <span class="cp-stream__title" style="${this.tileTitleColour&&"color:"+this.tileTitleColour}">${i}</span>
                <span class="cp-stream__meta" style="${this.tileSubtitleColour&&"color:"+this.tileSubtitleColour}"><strong class="cp-stream__meta--game">${a}</strong></span>
            </div>
            `),d=(1==this.wrapper.dataset.enableClassic&&"online"==t&&(c=`
                <div class="cp-stream__info-wrapper">
                    <span class="cp-stream__title cp-stream__title--classic" style="${this.tileTitleColour&&"color:"+this.tileTitleColour}"><span class="swti-live-marker"></span>${this.wrapper.dataset.classicOnlineText}</span>
                </div>
                `),1==this.wrapper.dataset.enableClassic&&"offline"==t&&(c=`
                <div class="cp-stream__info-wrapper">
                    <span class="cp-stream__title cp-stream__title--classic" style="${this.tileTitleColour&&"color:"+this.tileTitleColour}">${this.wrapper.dataset.classicOfflineText}</span>
                </div>
                `),`
            <div class="cp-stream cp-stream--${t} cp-stream--classic-${this.wrapper.dataset.enableClassic}" data-user="${i}" style="${this.hoverColour&&"background-color:"+this.hoverColour}">
                <a class="cp-stream__inner" href="https://www.kick.com/${h}" target="_blank" title="${a}" data-channel-name="${i}" data-viewers="${o}" data-language="${r}" data-type="${l}" data-status="${t}">
                    <div class="cp-stream__image">
                        <img loading="lazy" src="${s}">
                        <div class="cp-stream__overlay"></div>
                        <div class="cp-stream__embed-inside"></div>
                    </div>
                    <div class="cp-stream__info">
                    ${c}
                </div>
                ${n}
                </a>
            </div>
            `),h=((e.livestream||this.showOffline)&&this.target.insertAdjacentHTML("beforeend",d),parseInt(this.wrapper.dataset.online)+parseInt(this.wrapper.dataset.offline));this.wrapper.dataset.channelCount!=h&&h!=this.limit||this._postAppend()}},_postAppend:{value:function(){var e;this.loading&&this.loading.remove(),0==this.wrapper.dataset.online&&(this.showOfflineText||this.showOfflineImage)&&this._offlineMessage(),"feature"==this.layout&&this.target.children.length&&(1==(e=this.target.querySelectorAll(".cp-stream")).length&&(e=e[0].cloneNode(!0),this.target.appendChild(e)),setTimeout(function(){this._startFlipster(this.wrapper,this.target)}.bind(this),300)),"status"==this.layout&&(this.wrapper.classList.add("cp-streamweasels-kick--loaded"),setTimeout(function(){this.target.classList.add("cp-streamweasels-kick__streams--loaded")}.bind(this),1e3),setTimeout(function(){this.wrapper.classList.add("cp-streamweasels-kick--animation-finished")}.bind(this),2e3),this.target.classList.contains("cp-streamweasels-kick__streams--carousel-0"))&&setTimeout(function(){jQuery(this.target).slick({dots:!1,slidesToShow:1,slidesToScroll:1,swipeToSlide:!0,prevArrow:'<button type="button" class="slick-prev"><svg fill="#FFFFFF" height="24" viewBox="0 0 24 24" width="24"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',nextArrow:'<button type="button" class="slick-next"><svg fill="#FFFFFF" height="24" viewBox="0 0 24 24" width="24"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>'})}.bind(this),3e3),this._sortStreams(),this._clickHandler()}},_sortStreams:{value:function(){var t=this.wrapper.querySelector(".cp-streamweasels-kick__streams");[...t.children].sort(function(e,t){return"alpha"==this.tileSorting?e.children[0].dataset.channelName>t.children[0].dataset.channelName?1:-1:"least"==this.tileSorting?e.children[0].dataset.viewers-t.children[0].dataset.viewers:"most"==this.tileSorting?t.children[0].dataset.viewers-e.children[0].dataset.viewers:"latest"==this.tileSorting?t.children[0].dataset.date-e.children[0].dataset.date:"random"==this.tileSorting?.5-Math.random():void 0}.bind(this)).forEach(e=>{t.appendChild(e)})}},_clickHandler:{value:function(){var e,t,s,a;this.autoplay&&"kick"!==this.embed&&0<(e=this.wrapper.querySelectorAll(".cp-stream--online")).length&&(t=e.length-1,s=Math.floor(Math.random()*e.length),a=("most"==this.autoplaySelect?e[0]:"least"==this.autoplaySelect?e[t]:"random"==this.autoplaySelect?e[s]:e[0]).querySelector("a"),this.featured&&e.forEach(e=>{this.featured.toLowerCase()==e.children[0].dataset.channelName.toLowerCase()&&(a=e.children[0])}),"vods"==this.layout?this._embedVod(a):this._embedStream(a)),this.wrapper.querySelectorAll(".cp-stream__inner").forEach(t=>{t.addEventListener("click",function(e){e.preventDefault(),"vods"==this.layout?this._embedVod(t):this._embedStream(t)}.bind(this))})}},_embedStream:{value:function(r){var e,t=document.querySelector("body"),l=this.embedMuted?"?muted=true":"?muted=false",s=`<div class="cp-streamweasels-kick-modal">
                ${this.embedTitle&&"top"==this.embedTitlePosition&&"online"==r.dataset.status?'<div class="cp-streamweasels-kick-modal__title cp-streamweasels-kick-modal__title--'+this.embedChat+'"><p>'+r.getAttribute("title")+"</p></div>":""}
                <div class="cp-streamweasels-kick-modal__player cp-streamweasels-kick-modal__player--${this.embedChat}"></div>
                ${this.embedTitle&&"bottom"==this.embedTitlePosition&&"online"==r.dataset.status?'<div class="cp-streamweasels-kick-modal__title cp-streamweasels-kick-modal__title--'+this.embedChat+'"><p>'+r.getAttribute("title")+"</p></div>":""}
            </div>`,a=this.wrapper.querySelector(".cp-streamweasels-kick__player");"status"==this.layout&&"page"==this.embed&&(this.embed="popup"),"kick"==this.embed&&window.open("https://kick.com/"+r.dataset.channelName,"_blank"),"page"==this.embed&&(a.innerHTML="",(e=document.createElement("iframe")).src="https://player.kick.com/"+r.dataset.channelName+l,e.width="100%",e.height="100%",e.scrolling="no",e.allowFullscreen="true",a.appendChild(e),"wall"==this.layout&&a.scrollIntoView(),this.wrapper.classList.add("cp-streamweasels-kick--embed-page-active"),this.player.classList.add("cp-streamweasels-kick__player--embed-page-active")),"popup"==this.embed&&(t.insertAdjacentHTML("beforeend",s),a=document.querySelector(".cp-streamweasels-kick-modal"),t=document.querySelector(".cp-streamweasels-kick-modal__player"),(e=document.createElement("iframe")).src="https://player.kick.com/"+r.dataset.channelName+l,e.width="100%",e.height="100%",e.scrolling="no",e.allowFullscreen="true",e.id="kick-embed",t.appendChild(e),this._modalControls(a),this.wrapper.classList.add("cp-streamweasels-kick--embed-popup-active")),"feature"==this.layout&&"inside"==this.embed&&setTimeout(function(){var e=this.wrapper.querySelector(".flipster__item--current"),t=e.querySelector(".cp-stream__image"),s=t.querySelector("iframe"),a=t.querySelector("img"),i=a.width,a=a.height,e=("detailed"==this.tileLayout&&(a+=48),e.classList.add("flipster__item--embed"),s&&s.remove(),document.createElement("iframe"));e.src="https://player.kick.com/"+r.dataset.channelName+l,e.width=i+"px",e.height=a+"px",e.scrolling="no",e.id="kick-embed",t.appendChild(e),this.wrapper.classList.add("cp-streamweasels-kick--embed-page-active"),this.embedTitle=!1}.bind(this),300),this.embedTitle&&"page"==this.embed&&"online"==r.dataset.status&&this._embedTitle(r.getAttribute("title"))}},_embedVod:{value:function(e){window.open("https://kick.com/"+e.dataset.channelName+"?clip="+e.dataset.id,"_blank")}},_startFlipster:{value:function(i,e){var t=2;switch(e.querySelectorAll(".cp-stream--online").length){case 1:t=0;break;case 2:t=1}jQuery(i).flipster({style:"carousel",itemContainer:".cp-streamweasels-kick__streams",itemSelector:".cp-stream",loop:!0,buttons:!0,spacing:-.5,scrollwheel:!1,start:t,onItemSwitch:function(){var e,t=i.querySelector(".flipster__item--embed"),s=i.querySelector(".flipster__item--past-1"),a=i.querySelector(".flipster__item--future-1");t&&(e=t&&t.querySelector("iframe"),s=s&&s.querySelector("iframe"),a=a&&a.querySelector("iframe"),t.classList.remove("flipster__item--embed"),e&&e.remove(),s&&e.remove(),a)&&e.remove()}})}},_roundViewers:{value:function(e){return e=1e3<e&&e<999999&&".0K"==(e=(e/1e3).toFixed(1)+"K").slice(e.length-3)?e.replace(".0K","K"):e}},_daysAgo:{value:function(e){var t=new Date,e=new Date(e),s=(e.setDate(e.getDate()),t-e),a=0;if((s=Math.floor(s/1e3))<2)return"a moment ago";if(s<5)return"moments ago";if(s<60)return s+" seconds ago";if(s<120)return"a minute ago";if(s<3600){for(;60<=s;)s-=60,a+=1;return a+" minutes ago"}if(s<7200)return"an hour ago";if(s<86400){for(;3600<=s;)s-=3600,a+=1;return a+" hours ago"}if(s<172800)return"a day ago";if(s<604800){for(;172800<=s;)s-=172800,a+=1;return a+" days ago"}if(s<1209600)return"a week ago";if(s<2592e3){for(;604800<=s;)s-=604800,a+=1;return a+" weeks ago"}if(s<5184e3)return"a month ago";if(s<31536e3){for(;2592e3<=s;)s-=2592e3,a+=1;return a+" months ago"}return s<141912e4?"more than year ago":void 0}},_modalControls:{value:function(t){t.addEventListener("click",function(e){t.remove()}),document.onkeydown=function(e){"Escape"===e.key&&t.remove()}}},_embedTitle:{value:function(e){this.wrapper.querySelector(".cp-streamweasels-kick__title").innerHTML="<p>"+e+"</p>"}},_offlineMessage:{value:function(){var e=`<div class="cp-streamweasels-kick__offline">
                ${this.showOfflineImage&&"<img src='"+this.showOfflineImage+"'>"}
                ${this.showOfflineText&&"<h3>"+this.showOfflineText+"</h3>"}
            </div>`;this.wrapper.querySelector(".cp-streamweasels-kick__offline-wrapper").innerHTML="",this.wrapper.querySelector(".cp-streamweasels-kick__offline-wrapper").insertAdjacentHTML("beforeend",e)}}});var streamWeaselsKickNodes=document.querySelectorAll(".cp-streamweasels-kick");streamWeaselsKickNodes.forEach(function(item,index,array){var uuid=item.dataset.uuid,streamWeaselsKickVarsUuid=eval("streamWeaselsKickVars"+uuid),channelsLength=streamWeaselsKickVarsUuid.channels.indexOf(",")?streamWeaselsKickVarsUuid.channels.split(",").length:1,streamWeaselsKickInit=new streamWeaselsKick({uuid:uuid,channels:streamWeaselsKickVarsUuid.channels,channelsLength:channelsLength,limit:streamWeaselsKickVarsUuid.limit,layout:streamWeaselsKickVarsUuid.layout,embed:streamWeaselsKickVarsUuid.embed,embedTitle:streamWeaselsKickVarsUuid.embedTitle,embedTitlePosition:streamWeaselsKickVarsUuid.embedTitlePosition,embedMuted:streamWeaselsKickVarsUuid.embedMuted,showOffline:streamWeaselsKickVarsUuid.showOffline,showOfflineText:streamWeaselsKickVarsUuid.showOfflineText,showOfflineImage:streamWeaselsKickVarsUuid.showOfflineImage,autoplay:streamWeaselsKickVarsUuid.autoplay,autoplaySelect:streamWeaselsKickVarsUuid.autoplaySelect,featured:streamWeaselsKickVarsUuid.featured,offlineImage:streamWeaselsKickVarsUuid.offlineImage,logoImage:streamWeaselsKickVarsUuid.logoImage,profileImage:streamWeaselsKickVarsUuid.profileImage,tileLayout:streamWeaselsKickVarsUuid.tileLayout,tileSorting:streamWeaselsKickVarsUuid.tileSorting,tileLive:streamWeaselsKickVarsUuid.tileLive,logoBgColour:streamWeaselsKickVarsUuid.logoBgColour,logoBorderColour:streamWeaselsKickVarsUuid.logoBorderColour,maxWidth:streamWeaselsKickVarsUuid.maxWidth,tileBgColour:streamWeaselsKickVarsUuid.tileBgColour,tileTitleColour:streamWeaselsKickVarsUuid.tileTitleColour,tileSubtitleColour:streamWeaselsKickVarsUuid.tileSubtitleColour,tileRoundedCorners:streamWeaselsKickVarsUuid.tileRoundedCorners,hoverColour:streamWeaselsKickVarsUuid.hoverColour})});